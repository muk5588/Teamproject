<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="comment.dao.CommentDao">

<select id="selectCommentByBoardNo" resultType="Comment" parameterType="Board">
	SELECT rnum comm_seq, commno, boardno, USERNO, COMMCONTENT, commdate FROM (
		SELECT rownum rnum, B.* FROM(
			SELECT COMMNO, boardno, USERNO, COMMCONTENT, commdate
			FROM COMMENTTB
			WHERE boardno = #{boardNo}
			ORDER BY commdate ASC
		) B
	)
	ORDER BY rnum ASC
</select>

<insert id="commentInsert" parameterType="Comment">
	<selectKey keyProperty="commNo" order="BEFORE" resultType="int">
		SELECT commentTB_seq.nextval FROM dual
	</selectKey>
	INSERT INTO COMMENTTB( COMMNO, boardno, userno, commContent)
	VALUES( #{commNo }, #{boardNo }, #{userNo }, #{commContent } )
</insert>
	
<delete id="deleteComment" parameterType="Comment">
DELETE ADMIN.COMMENTTB
<where>
	AND COMMNO = #{commNo}
	AND boardno = #{boardNo}
</where> 

</delete>

</mapper>